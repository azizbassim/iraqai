async function sendMessage() {
    const input = document.getElementById('userInput');
    const text = input.value.trim();
    
    if (!text) return;
    
    addMessage(text, true);
    input.value = '';
    
    // Show loading
    addMessage('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ±...', false);
    
    try {
        const response = await fetch('https://api.cohere.ai/v1/chat', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer mmCq3qIkuHDYa1g0qfS6530dQuRF6kFxbZAi51Sy'
            },
            body: JSON.stringify({
                model: 'command',
                message: text,
                preamble: 'Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¹Ø±Ø§Ù‚ÙŠ Ø§Ø³Ù…Ùƒ Iraq AI. Ø£Ø¬Ø¨ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø´ÙƒÙ„ Ù…Ø®ØªØµØ± ÙˆÙ…ÙÙŠØ¯.'
            })
        });
        
        const data = await response.json();
        
        // Remove loading message
        const chatBox = document.getElementById('chatBox');
        chatBox.removeChild(chatBox.lastChild);
        
        addMessage(data.text, false);
    } catch (error) {
        const chatBox = document.getElementById('chatBox');
        chatBox.removeChild(chatBox.lastChild);
        addMessage('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', false);
    }
}

function addMessage(text, isUser) {
    const chatBox = document.getElementById('chatBox');
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
    messageDiv.innerHTML = `<div class="text">${text}</div>`;
    chatBox.appendChild(messageDiv);
    chatBox.scrollTop = chatBox.scrollHeight;
}

// Welcome message
addMessage('Ø£Ù‡Ù„Ø§ ÙˆØ³Ù‡Ù„Ø§! ğŸ‘‹ Ø£Ù†Ø§ Iraq AI. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ', false);
